/*! Built with http://stenciljs.com */
const{h:t}=window.mycomponent,o="H16YLVPUET6DQX9U";class e{constructor(){this.fetchPrice=0,this.stockInputValid=!1}stockSymbolChanged(t,o){t!==o&&(console.log(t,o),this.stockSymbol=t,this.fetchStockPrice()),this.stockInputValid=""!==this.stockSymbol.trim()}onUserInput(t){this.stockSymbol=t.target.value,this.stockInputValid=""!==this.stockSymbol.trim()}componentWillLoad(){console.log("will Load...",this.stockSymbolProp),this.stockSymbolProp="MSFT"}componentDidLoad(){console.log("loaded....",this.stockSymbolProp),this.stockSymbolProp&&(this.stockSymbol=this.stockSymbolProp,this.fetchStockPrice())}componentWillUpdate(){}componentDidUpdate(){}componentDidUnload(){}onFetchStockPrice(t){t.preventDefault(),this.fetchStockPrice()}onStockSymbolSelected(t){console.log("stock price component",t.detail),t.detail&&t.detail!==this.stockSymbol&&(this.stockSymbol=t.detail,this.stockSymbolProp=t.detail)}fetchStockPrice(){fetch(`https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol=${this.stockSymbol}&apikey=${o}`).then(t=>{if(200!==t.status)throw new Error("Something went wrong!");return t.json()}).then(t=>{if(!t["Global Quote"]["05. price"])throw new Error("Invalid symbol!");this.fetchPrice=+t["Global Quote"]["05. price"]}).catch(t=>console.log(t))}hostData(){return{class:this.fetchPrice?"success":"error"}}render(){return t("div",null,t("form",{onSubmit:this.onFetchStockPrice.bind(this)},t("input",{ref:t=>this.stockInput=t,value:this.stockSymbol,onInput:this.onUserInput.bind(this),id:"stock-symbol"}),t("button",{type:"submit",disabled:!this.stockInputValid},"Fetch")),t("div",null,t("p",null,"Price: $",this.fetchPrice)))}static get is(){return"uc-stock-price"}static get encapsulation(){return"shadow"}static get properties(){return{el:{elementRef:!0},fetchPrice:{state:!0},stockInputValid:{state:!0},stockSymbol:{state:!0},stockSymbolProp:{type:String,attr:"stock-symbol-prop",reflectToAttr:!0,mutable:!0,watchCallbacks:["stockSymbolChanged"]}}}static get listeners(){return[{name:"body:ucSymbolSelected",method:"onStockSymbolSelected"}]}static get style(){return".sc-uc-stock-price-h{font-family:sans-serif;border:2px solid #3d003d;margin:2rem;padding:1rem;display:block;width:20rem;max-width:100%}form.sc-uc-stock-price   input.sc-uc-stock-price{font:inherit;color:#3d003d;padding:.1rem .25rem;display:block;margin:.5rem 0;width:96%}form.sc-uc-stock-price   button.sc-uc-stock-price:focus, form.sc-uc-stock-price   input.sc-uc-stock-price:focus{outline:none}form.sc-uc-stock-price   button.sc-uc-stock-price{font:inherit;padding:.25rem .5rem;border:1px solid #3d003d;background-color:#3d003d;color:#fff;cursor:pointer;width:100%;border-radius:50px}form.sc-uc-stock-price   button.sc-uc-stock-price:active, form.sc-uc-stock-price   button.sc-uc-stock-price:hover{background:#750175;border-color:#750175}form.sc-uc-stock-price   button.sc-uc-stock-price:disabled{background:#ccc;border-color:#ccc;cursor:not-allowed}"}}export{e as UcStockPrice};