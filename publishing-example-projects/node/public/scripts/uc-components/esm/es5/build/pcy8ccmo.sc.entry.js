/*! Built with http://stenciljs.com */
import{h}from"../mycomponent.core.js";var API_KEY="H16YLVPUET6DQX9U",StockPrice=function(){function t(){this.fetchPrice=0,this.stockInputValid=!1}return t.prototype.stockSymbolChanged=function(t,o){t!==o&&(console.log(t,o),this.stockSymbol=t,this.fetchStockPrice()),this.stockInputValid=""!==this.stockSymbol.trim()},t.prototype.onUserInput=function(t){this.stockSymbol=t.target.value,this.stockInputValid=""!==this.stockSymbol.trim()},t.prototype.componentWillLoad=function(){console.log("will Load...",this.stockSymbolProp),this.stockSymbolProp="MSFT"},t.prototype.componentDidLoad=function(){console.log("loaded....",this.stockSymbolProp),this.stockSymbolProp&&(this.stockSymbol=this.stockSymbolProp,this.fetchStockPrice())},t.prototype.componentWillUpdate=function(){},t.prototype.componentDidUpdate=function(){},t.prototype.componentDidUnload=function(){},t.prototype.onFetchStockPrice=function(t){t.preventDefault(),this.fetchStockPrice()},t.prototype.onStockSymbolSelected=function(t){console.log("stock price component",t.detail),t.detail&&t.detail!==this.stockSymbol&&(this.stockSymbol=t.detail,this.stockSymbolProp=t.detail)},t.prototype.fetchStockPrice=function(){var t=this;fetch("https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol="+this.stockSymbol+"&apikey="+API_KEY).then(function(t){if(200!==t.status)throw new Error("Something went wrong!");return t.json()}).then(function(o){if(!o["Global Quote"]["05. price"])throw new Error("Invalid symbol!");t.fetchPrice=+o["Global Quote"]["05. price"]}).catch(function(t){return console.log(t)})},t.prototype.hostData=function(){return{class:this.fetchPrice?"success":"error"}},t.prototype.render=function(){var t=this;return h("div",null,h("form",{onSubmit:this.onFetchStockPrice.bind(this)},h("input",{ref:function(o){return t.stockInput=o},value:this.stockSymbol,onInput:this.onUserInput.bind(this),id:"stock-symbol"}),h("button",{type:"submit",disabled:!this.stockInputValid},"Fetch")),h("div",null,h("p",null,"Price: $",this.fetchPrice)))},Object.defineProperty(t,"is",{get:function(){return"uc-stock-price"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"encapsulation",{get:function(){return"shadow"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"properties",{get:function(){return{el:{elementRef:!0},fetchPrice:{state:!0},stockInputValid:{state:!0},stockSymbol:{state:!0},stockSymbolProp:{type:String,attr:"stock-symbol-prop",reflectToAttr:!0,mutable:!0,watchCallbacks:["stockSymbolChanged"]}}},enumerable:!0,configurable:!0}),Object.defineProperty(t,"listeners",{get:function(){return[{name:"body:ucSymbolSelected",method:"onStockSymbolSelected"}]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"style",{get:function(){return".sc-uc-stock-price-h{font-family:sans-serif;border:2px solid #3d003d;margin:2rem;padding:1rem;display:block;width:20rem;max-width:100%}form.sc-uc-stock-price   input.sc-uc-stock-price{font:inherit;color:#3d003d;padding:.1rem .25rem;display:block;margin:.5rem 0;width:96%}form.sc-uc-stock-price   button.sc-uc-stock-price:focus, form.sc-uc-stock-price   input.sc-uc-stock-price:focus{outline:none}form.sc-uc-stock-price   button.sc-uc-stock-price{font:inherit;padding:.25rem .5rem;border:1px solid #3d003d;background-color:#3d003d;color:#fff;cursor:pointer;width:100%;border-radius:50px}form.sc-uc-stock-price   button.sc-uc-stock-price:active, form.sc-uc-stock-price   button.sc-uc-stock-price:hover{background:#750175;border-color:#750175}form.sc-uc-stock-price   button.sc-uc-stock-price:disabled{background:#ccc;border-color:#ccc;cursor:not-allowed}"},enumerable:!0,configurable:!0}),t}();export{StockPrice as UcStockPrice};